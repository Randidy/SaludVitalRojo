<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${medico.id} != null ? 'Editar Médico' : 'Registrar Médico'">Registrar Médico</title>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        body {
            background: #f8f9fa;
            font-family: 'Segoe UI', sans-serif;
        }

        .form-container {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 30px 40px;
            max-width: 700px;
            margin: 50px auto;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: #0d6efd;
            text-align: center;
            margin-bottom: 25px;
        }

        h4 {
            margin-top: 25px;
            color: #343a40;
        }

        label {
            font-weight: 600;
        }

        .btn-success {
            background-color: #198754;
        }

        .btn-success:hover {
            background-color: #157347;
        }

        .btn-secondary {
            background-color: #6c757d;
        }

        .btn-secondary:hover {
            background-color: #5c636a;
        }

        .row.mb-2 {
            border: 1px solid #dee2e6;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            background-color: #f1f3f5;
        }

        .form-text {
            color: #6c757d;
        }
    </style>
</head>
<body>
<div class="form-container">

    <h2 th:text="${medico.id} != null ? 'Editar Médico' : 'Registrar Médico'">Registrar Médico</h2>

    <!-- Mensajes de error o éxito -->
    <div th:if="${mensaje}" class="alert alert-success" th:text="${mensaje}"></div>
    <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

    <form th:action="${medico.id} == null ? @{/medicos/guardar} : @{/medicos/actualizar/{id}(id=${medico.id})}"
          th:object="${medico}" method="post">

        <!-- Nombre -->
        <div class="mb-3">
            <label for="nombre" class="form-label"><i class="fas fa-user"></i> Nombre</label>
            <input type="text" th:field="*{nombre}" class="form-control" id="nombre" placeholder="Nombre" required>
        </div>

        <!-- Apellido -->
        <div class="mb-3">
            <label for="apellido" class="form-label"><i class="fas fa-user"></i> Apellido</label>
            <input type="text" th:field="*{apellido}" class="form-control" id="apellido" placeholder="Apellido" required>
        </div>

        <!-- Email -->
        <div class="mb-3">
            <label for="email" class="form-label"><i class="fas fa-envelope"></i> Email</label>
            <input type="email" th:field="*{email}" class="form-control" id="email" placeholder="Email" required>
        </div>

        <!-- Password (solo para nuevo médico) -->
        <div class="mb-3" th:if="${medico.id} == null">
            <label for="password" class="form-label"><i class="fas fa-lock"></i> Contraseña</label>
            <input type="password" name="password" class="form-control" id="password" placeholder="Contraseña">
            <small class="form-text text-muted">Si no ingresa nada, se usará la contraseña por defecto: 123456</small>
        </div>

        <!-- Especialidad -->
        <div class="mb-3">
            <label for="especialidad" class="form-label"><i class="fas fa-stethoscope"></i> Especialidad</label>
            <select th:field="*{especialidad}" class="form-select" id="especialidad" required>
                <option th:each="esp : ${especialidades}" th:value="${esp}" th:text="${esp}"></option>
            </select>
        </div>

        <!-- Horarios de Atención -->
        <h4>Horarios de Atención</h4>
        <div th:each="horario, iterStat : *{horarios}">
            <div class="row mb-2">
                <div class="col">
                    <label>Día</label>
                    <select th:field="*{horarios[__${iterStat.index}__].dia}" class="form-select" required>
                        <option value="">--Selecciona--</option>
                        <option th:value="${T(java.time.DayOfWeek).MONDAY}" th:text="Lunes"></option>
                        <option th:value="${T(java.time.DayOfWeek).TUESDAY}" th:text="Martes"></option>
                        <option th:value="${T(java.time.DayOfWeek).WEDNESDAY}" th:text="Miércoles"></option>
                        <option th:value="${T(java.time.DayOfWeek).THURSDAY}" th:text="Jueves"></option>
                        <option th:value="${T(java.time.DayOfWeek).FRIDAY}" th:text="Viernes"></option>
                        <option th:value="${T(java.time.DayOfWeek).SATURDAY}" th:text="Sábado"></option>
                        <option th:value="${T(java.time.DayOfWeek).SUNDAY}" th:text="Domingo"></option>
                    </select>
                </div>
                <div class="col">
                    <label>Inicio</label>
                    <input type="time" th:field="*{horarios[__${iterStat.index}__].horaInicio}" class="form-control" required>
                </div>
                <div class="col">
                    <label>Fin</label>
                    <input type="time" th:field="*{horarios[__${iterStat.index}__].horaFin}" class="form-control" required>
                </div>
            </div>
        </div>

        <div class="mt-4 d-flex justify-content-between">
            <button type="submit" class="btn btn-success"><i class="fas fa-save"></i> Guardar</button>
            <a th:href="@{/medicos}" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Cancelar</a>
        </div>
    </form>
    
    
    
    
</div>

<!-- Font Awesome -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js"></script>
</body>
</html>
